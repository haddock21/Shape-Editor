{"ast":null,"code":"// src/pages/EditorPage.js\nimport React,{useState,useRef}from\"react\";import Canvas from\"../components/Canvas\";import ToolBar from\"../components/ToolBar\";import TopBar from\"../components/TopBar\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const EditorPage=()=>{const[activeTool,setActiveTool]=useState(\"cursor\");const[lineColor,setLineColor]=useState(\"#000000\");const[fillColor,setFillColor]=useState(\"#ffffff\");const[strokeWidth,setStrokeWidth]=useState(1);const[showSaveModal,setShowSaveModal]=useState(false);const[modalCount,setModalCount]=useState(0);const[saveFormat,setSaveFormat]=useState(\"jpeg\");const canvasRef=useRef();const handleExportJSON=()=>{var _canvasRef$current;return(_canvasRef$current=canvasRef.current)===null||_canvasRef$current===void 0?void 0:_canvasRef$current.exportShapes();};const handleDownloadJPEG=()=>{var _canvasRef$current2;return(_canvasRef$current2=canvasRef.current)===null||_canvasRef$current2===void 0?void 0:_canvasRef$current2.downloadJPEG();};const handleDownloadPDF=()=>{var _canvasRef$current3;return(_canvasRef$current3=canvasRef.current)===null||_canvasRef$current3===void 0?void 0:_canvasRef$current3.downloadPDF();};const handleLoad=shapes=>{var _canvasRef$current4;return(_canvasRef$current4=canvasRef.current)===null||_canvasRef$current4===void 0?void 0:_canvasRef$current4.loadShapes(shapes);};const handleClear=()=>{var _canvasRef$current5;const count=((_canvasRef$current5=canvasRef.current)===null||_canvasRef$current5===void 0?void 0:_canvasRef$current5.getShapeCount())||0;if(count>0){setModalCount(count);setShowSaveModal(true);}else{canvasRef.current.clearShapes();}};const clearWithoutSaving=()=>{canvasRef.current.clearShapes();setShowSaveModal(false);};const saveAndClear=()=>{switch(saveFormat){case\"json\":canvasRef.current.exportShapes();break;case\"jpeg\":canvasRef.current.downloadJPEG();break;case\"pdf\":canvasRef.current.downloadPDF();break;}canvasRef.current.clearShapes();setShowSaveModal(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"h-100 m-0\",children:[/*#__PURE__*/_jsx(TopBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex m-0\",style:{height:\"95%\"},children:[/*#__PURE__*/_jsx(ToolBar,{activeTool:activeTool,setActiveTool:setActiveTool,onExportJSON:handleExportJSON,onDownloadJPEG:handleDownloadJPEG,onDownloadPDF:handleDownloadPDF,onLoad:handleLoad,onClear:handleClear,lineColor:lineColor,fillColor:fillColor,setLineColor:setLineColor,setFillColor:setFillColor,strokeWidth:strokeWidth,setStrokeWidth:setStrokeWidth}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column align-items-center justify-content-center w-100\",children:/*#__PURE__*/_jsx(Canvas,{ref:canvasRef,activeTool:activeTool,lineColor:lineColor,fillColor:fillColor,strokeWidth:strokeWidth})}),showSaveModal&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal show\",tabIndex:\"-1\",style:{display:\"block\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",style:{backgroundColor:\"#979797\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:\"Save before clearing?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>setShowSaveModal(false)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"You have \",modalCount,\" shape\",modalCount>1?\"s\":\"\",\". Select format to save before clearing:\"]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:saveFormat,onChange:e=>setSaveFormat(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"jpeg\",children:\"JPEG Image\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pdf\",children:\"PDF Document\"}),/*#__PURE__*/_jsx(\"option\",{value:\"json\",children:\"JSON File\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:clearWithoutSaving,children:\"Clear Without Saving\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:saveAndClear,children:\"Save & Clear\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn text-white\",style:{backgroundColor:\"#c41414\"},onClick:()=>setShowSaveModal(false),children:\"Cancel\"})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop show\"}),\" \"]})]})]});};export default EditorPage;","map":{"version":3,"names":["React","useState","useRef","Canvas","ToolBar","TopBar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditorPage","activeTool","setActiveTool","lineColor","setLineColor","fillColor","setFillColor","strokeWidth","setStrokeWidth","showSaveModal","setShowSaveModal","modalCount","setModalCount","saveFormat","setSaveFormat","canvasRef","handleExportJSON","_canvasRef$current","current","exportShapes","handleDownloadJPEG","_canvasRef$current2","downloadJPEG","handleDownloadPDF","_canvasRef$current3","downloadPDF","handleLoad","shapes","_canvasRef$current4","loadShapes","handleClear","_canvasRef$current5","count","getShapeCount","clearShapes","clearWithoutSaving","saveAndClear","className","children","style","height","onExportJSON","onDownloadJPEG","onDownloadPDF","onLoad","onClear","ref","tabIndex","display","backgroundColor","type","onClick","value","onChange","e","target"],"sources":["/home/nightsquid/Desktop/GUI II/Shape Editor/src/pages/EditorPage.js"],"sourcesContent":["// src/pages/EditorPage.js\nimport React, { useState, useRef } from \"react\";\nimport Canvas from \"../components/Canvas\";\nimport ToolBar from \"../components/ToolBar\";\nimport TopBar from \"../components/TopBar\";\n\nconst EditorPage = () => {\n    const [activeTool, setActiveTool] = useState(\"cursor\");\n    const [lineColor, setLineColor] = useState(\"#000000\");\n    const [fillColor, setFillColor] = useState(\"#ffffff\");\n    const [strokeWidth, setStrokeWidth] = useState(1);\n    const [showSaveModal, setShowSaveModal] = useState(false);\n    const [modalCount, setModalCount] = useState(0);\n    const [saveFormat, setSaveFormat] = useState(\"jpeg\");\n\n    const canvasRef = useRef();\n\n    const handleExportJSON = () => canvasRef.current?.exportShapes();\n    const handleDownloadJPEG = () => canvasRef.current?.downloadJPEG();\n    const handleDownloadPDF = () => canvasRef.current?.downloadPDF();\n    const handleLoad = (shapes) => canvasRef.current?.loadShapes(shapes);\n\n    const handleClear = () => {\n        const count = canvasRef.current?.getShapeCount() || 0;\n        if (count > 0) {\n            setModalCount(count);\n            setShowSaveModal(true);\n        } else {\n            canvasRef.current.clearShapes();\n        }\n    };\n\n    const clearWithoutSaving = () => {\n        canvasRef.current.clearShapes();\n        setShowSaveModal(false);\n    };\n\n    const saveAndClear = () => {\n        switch (saveFormat) {\n            case \"json\": canvasRef.current.exportShapes(); break;\n            case \"jpeg\": canvasRef.current.downloadJPEG(); break;\n            case \"pdf\": canvasRef.current.downloadPDF(); break;\n        }\n        canvasRef.current.clearShapes();\n        setShowSaveModal(false);\n    };\n\n    return (\n        <div className=\"h-100 m-0\">\n            <TopBar/>\n            <div className=\"d-flex m-0\" style={{height: \"95%\"}}>\n            <ToolBar\n                activeTool={activeTool}\n                setActiveTool={setActiveTool}\n                onExportJSON={handleExportJSON}\n                onDownloadJPEG={handleDownloadJPEG}\n                onDownloadPDF={handleDownloadPDF}\n                onLoad={handleLoad}\n                onClear={handleClear}\n                lineColor={lineColor}\n                fillColor={fillColor}\n                setLineColor={setLineColor}\n                setFillColor={setFillColor}\n                strokeWidth={strokeWidth}\n                setStrokeWidth={setStrokeWidth}\n            />\n            <div className=\"d-flex flex-column align-items-center justify-content-center w-100\">\n                <Canvas\n                    ref={canvasRef}\n                    activeTool={activeTool}\n                    lineColor={lineColor}\n                    fillColor={fillColor}\n                    strokeWidth={strokeWidth}\n                />\n            </div>\n            {showSaveModal && (<>\n                <div className=\"modal show\" tabIndex=\"-1\" style={{ display: \"block\" }}>\n                    <div className=\"modal-dialog\">\n                        <div className=\"modal-content\" style={{ backgroundColor: \"#979797\" }}>\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\">Save before clearing?</h5>\n                                <button\n                                    type=\"button\"\n                                    className=\"btn-close\"\n                                    onClick={() => setShowSaveModal(false)}\n                                />\n                            </div>\n                            <div className=\"modal-body\">\n                                <p>\n                                    You have {modalCount} shape{modalCount > 1 ? \"s\" : \"\"}.\n                                    Select format to save before clearing:\n                                </p>\n                                <select\n                                    className=\"form-select\"\n                                    value={saveFormat}\n                                    onChange={(e) => setSaveFormat(e.target.value)}\n                                >\n                                    <option value=\"jpeg\">JPEG Image</option>\n                                    <option value=\"pdf\">PDF Document</option>\n                                    <option value=\"json\">JSON File</option>\n                                </select>\n                            </div>\n                            <div className=\"modal-footer\">\n                                <button\n                                    type=\"button\"\n                                    className=\"btn btn-secondary\"\n                                    onClick={clearWithoutSaving}\n                                >\n                                    Clear Without Saving\n                                </button>\n                                <button\n                                    type=\"button\"\n                                    className=\"btn btn-primary\"\n                                    onClick={saveAndClear}\n                                >\n                                    Save & Clear\n                                </button>\n                                <button\n                                    type=\"button\"\n                                    className=\"btn text-white\"\n                                    style={{ backgroundColor: \"#c41414\" }}\n                                    onClick={() => setShowSaveModal(false)}\n                                >\n                                    Cancel\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"modal-backdrop show\" /> </>\n            )}\n            </div>\n        </div>\n    );\n};\n\nexport default EditorPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}