{"ast":null,"code":"var _jsxFileName = \"/home/nightsquid/Desktop/GUI II/studyspace/src/components/Canvas.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from \"react\";\nimport \"../css/canvas.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Canvas = ({\n  activeTool\n}) => {\n  _s();\n  const canvas1Ref = useRef(null);\n  const canvas2Ref = useRef(null);\n\n  // Track drawing state\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [startPos, setStartPos] = useState({\n    x: 0,\n    y: 0\n  });\n\n  // Store completed squares\n  const squaresRef = useRef([]);\n  useEffect(() => {\n    const canvas1 = canvas1Ref.current;\n    const canvas2 = canvas2Ref.current;\n    const ctx1 = canvas1.getContext(\"2d\");\n    const ctx2 = canvas2.getContext(\"2d\");\n\n    // Redraw all saved squares on layer1\n    const redrawAll = () => {\n      ctx1.clearRect(0, 0, canvas1.width, canvas1.height);\n      squaresRef.current.forEach(({\n        x,\n        y,\n        w,\n        h\n      }) => {\n        ctx1.strokeRect(x, y, w, h);\n      });\n    };\n    const handleMouseDown = e => {\n      if (activeTool !== \"square\") return;\n      const rect = canvas2.getBoundingClientRect();\n      setStartPos({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      });\n      setIsDrawing(true);\n    };\n    const handleMouseMove = e => {\n      if (!isDrawing || activeTool !== \"square\") return;\n      const rect = canvas2.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n      const w = x - startPos.x;\n      const h = y - startPos.y;\n\n      // Preview on layer2\n      ctx2.clearRect(0, 0, canvas2.width, canvas2.height);\n      ctx2.strokeRect(startPos.x, startPos.y, w, h);\n    };\n    const handleMouseUp = e => {\n      if (!isDrawing || activeTool !== \"square\") return;\n      const rect = canvas2.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n      const w = x - startPos.x;\n      const h = y - startPos.y;\n\n      // Save the square\n      squaresRef.current.push({\n        x: startPos.x,\n        y: startPos.y,\n        w,\n        h\n      });\n\n      // Redraw all onto layer1\n      redrawAll();\n\n      // Clear preview layer\n      ctx2.clearRect(0, 0, canvas2.width, canvas2.height);\n      setIsDrawing(false);\n    };\n\n    // Attach listeners to layer2\n    canvas2.addEventListener(\"mousedown\", handleMouseDown);\n    canvas2.addEventListener(\"mousemove\", handleMouseMove);\n    canvas2.addEventListener(\"mouseup\", handleMouseUp);\n    return () => {\n      canvas2.removeEventListener(\"mousedown\", handleMouseDown);\n      canvas2.removeEventListener(\"mousemove\", handleMouseMove);\n      canvas2.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, [activeTool, isDrawing, startPos]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"canvas-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvas1Ref,\n      width: 600,\n      height: 700\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvas2Ref,\n      width: 600,\n      height: 700,\n      style: {\n        backgroundColor: \"transparent\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n_s(Canvas, \"GC0/DfvJ+OWqVzexIlPfH4JqDlA=\");\n_c = Canvas;\nexport default Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["React","useRef","useEffect","useState","jsxDEV","_jsxDEV","Canvas","activeTool","_s","canvas1Ref","canvas2Ref","isDrawing","setIsDrawing","startPos","setStartPos","x","y","squaresRef","canvas1","current","canvas2","ctx1","getContext","ctx2","redrawAll","clearRect","width","height","forEach","w","h","strokeRect","handleMouseDown","e","rect","getBoundingClientRect","clientX","left","clientY","top","handleMouseMove","handleMouseUp","push","addEventListener","removeEventListener","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","style","backgroundColor","_c","$RefreshReg$"],"sources":["/home/nightsquid/Desktop/GUI II/studyspace/src/components/Canvas.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport \"../css/canvas.css\";\n\nconst Canvas = ({ activeTool }) => {\n    const canvas1Ref = useRef(null);\n    const canvas2Ref = useRef(null);\n\n    // Track drawing state\n    const [isDrawing, setIsDrawing] = useState(false);\n    const [startPos, setStartPos] = useState({ x: 0, y: 0 });\n\n    // Store completed squares\n    const squaresRef = useRef([]);\n\n    useEffect(() => {\n        const canvas1 = canvas1Ref.current;\n        const canvas2 = canvas2Ref.current;\n        const ctx1 = canvas1.getContext(\"2d\");\n        const ctx2 = canvas2.getContext(\"2d\");\n\n        // Redraw all saved squares on layer1\n        const redrawAll = () => {\n            ctx1.clearRect(0, 0, canvas1.width, canvas1.height);\n            squaresRef.current.forEach(({ x, y, w, h }) => {\n                ctx1.strokeRect(x, y, w, h);\n            });\n        };\n\n        const handleMouseDown = (e) => {\n            if (activeTool !== \"square\") return;\n            const rect = canvas2.getBoundingClientRect();\n            setStartPos({\n                x: e.clientX - rect.left,\n                y: e.clientY - rect.top,\n            });\n            setIsDrawing(true);\n        };\n\n        const handleMouseMove = (e) => {\n            if (!isDrawing || activeTool !== \"square\") return;\n            const rect = canvas2.getBoundingClientRect();\n            const x = e.clientX - rect.left;\n            const y = e.clientY - rect.top;\n            const w = x - startPos.x;\n            const h = y - startPos.y;\n\n            // Preview on layer2\n            ctx2.clearRect(0, 0, canvas2.width, canvas2.height);\n            ctx2.strokeRect(startPos.x, startPos.y, w, h);\n        };\n\n        const handleMouseUp = (e) => {\n            if (!isDrawing || activeTool !== \"square\") return;\n            const rect = canvas2.getBoundingClientRect();\n            const x = e.clientX - rect.left;\n            const y = e.clientY - rect.top;\n            const w = x - startPos.x;\n            const h = y - startPos.y;\n\n            // Save the square\n            squaresRef.current.push({ x: startPos.x, y: startPos.y, w, h });\n\n            // Redraw all onto layer1\n            redrawAll();\n\n            // Clear preview layer\n            ctx2.clearRect(0, 0, canvas2.width, canvas2.height);\n            setIsDrawing(false);\n        };\n\n        // Attach listeners to layer2\n        canvas2.addEventListener(\"mousedown\", handleMouseDown);\n        canvas2.addEventListener(\"mousemove\", handleMouseMove);\n        canvas2.addEventListener(\"mouseup\", handleMouseUp);\n\n        return () => {\n            canvas2.removeEventListener(\"mousedown\", handleMouseDown);\n            canvas2.removeEventListener(\"mousemove\", handleMouseMove);\n            canvas2.removeEventListener(\"mouseup\", handleMouseUp);\n        };\n    }, [activeTool, isDrawing, startPos]);\n\n    return (\n        <div className=\"canvas-container\">\n            {/* **IMPORTANT**: width/height must be numbers */}\n            <canvas ref={canvas1Ref} width={600} height={700} />\n            <canvas ref={canvas2Ref} width={600} height={700} style={{backgroundColor: \"transparent\"}} />\n        </div>\n    );\n};\n\nexport default Canvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}